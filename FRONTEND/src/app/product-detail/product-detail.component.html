<div class="container mt-4">
    <div *ngIf="producto" class="row">
        <div class="col-md-6">
            <img [src]="producto.imagen" class="product-image" alt="{{ producto.nombre }}">
        </div>
        <div class="col-md-6">
            <h2>{{ producto.nombre }}</h2>
            <p><strong>Descripción:</strong> {{ producto.descripcion }}</p>
            <p><strong>Precio:</strong> {{ producto.precio | currency:'EUR':'symbol':'1.2-2' }}</p>
            <p><strong>Color:</strong> {{ producto.color }}</p>

            <!-- Sección de tallas disponibles -->
            <div *ngIf="producto.tallas.length > 0">
                <label for="tallaSelect"><strong>Tallas disponibles:</strong></label>
                <select id="tallaSelect" [(ngModel)]="selectedTalla" (change)="onTallaChange()">
                    <option *ngFor="let talla of producto.tallas" [value]="talla.talla">
                        {{ talla.talla }}-{{ talla.pivot.cantidad }}
                    </option>
                </select>
                <p class="mt-3" *ngIf="selectedCantidad !== null">
                    <strong>Cantidad disponible:</strong> {{ selectedCantidad }}
                </p>
            </div>

            <!-- Botón de agregar al carrito -->
            <button class="btn btn-primary p-1 mt-2">Agregar al carrito</button>
        </div>

        <div class="col-md-12 mt-5"></div>
        <h4>Valoraciones del Producto</h4>

        <!-- Si hay valoraciones, las mostramos -->
        <div *ngIf="valoraciones.length > 0">
            <div class="card my-2" *ngFor="let valoracion of valoraciones">
                <div class="card-body">
                    <h5 class="card-title">Calificación: {{ valoracion.calificacion }} estrellas</h5>
                    <p class="card-text">{{ valoracion.comentario }}</p>
                </div>
            </div>
        </div>

        <!-- Mensaje cuando no hay valoraciones -->
        <div *ngIf="valoraciones.length === 0" class="alert alert-info">
            Aún no hay valoraciones para este producto.
        </div>
    </div>
</div>
<div class="col-md-12 mt-5">
    <h4>Valorar Producto</h4>
    <form (ngSubmit)="submitReview()">
        <div class="form-group">
            <label for="rating">Calificación:</label>
            <select id="rating" class="form-control w-25" [(ngModel)]="valoracion.calificacion" name="rating">
                <option value="5">★★★★★ - Excelente</option>
                <option value="4">★★★★☆ - Muy Bueno</option>
                <option value="3">★★★☆☆ - Bueno</option>
                <option value="2">★★☆☆☆ - Regular</option>
                <option value="1">★☆☆☆☆ - Malo</option>
            </select>
        </div>

        <div class="form-group mt-3">
            <label for="reviewText">Comentario:</label>
            <textarea id="reviewText" class="form-control" rows="4" placeholder="Escribe tu comentario aquí..."
                [(ngModel)]="valoracion.comentario" name="reviewText"></textarea>
        </div>

        <button type="submit" class="btn btn-success mt-3">Enviar Valoración</button>
    </form>
</div>



<div *ngIf="!producto" class="alert alert-warning">
    Producto no encontrado.
</div>
